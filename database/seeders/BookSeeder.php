<?php

namespace Database\Seeders;

use App\Models\Book;
use App\Models\Category;
use App\Models\User;
use Illuminate\Database\Seeder;

class BookSeeder extends Seeder
{
    public function run(): void
    {
        $user = User::first() ?? User::factory()->create([
            'name' => 'الدكتور سليم',
            'full_name' => 'الدكتور سليم محمد أحمد',
            'email' => 'doctor@g.com',
        ]);

        $categories = Category::all();

        // قائمة العناوين العربية
        $arabicTitles = [
            'مشروع تطوير النظام الصحي',
            'مشروع البحث العلمي في الطب',
            'مشروع التوعية الصحية',
            'مشروع تطوير البرمجيات الطبية',
            'مشروع الدراسات السريرية',
            'مشروع التطوير التكنولوجي',
            'مشروع التعليم الطبي',
            'مشروع الرعاية الصحية',
            'مشروع الأبحاث الطبية',
            'مشروع التحسين الصحي',
            'مشروع الوقاية من الأمراض المزمنة',
            'مشروع دعم الصحة النفسية',
            'مشروع تطوير خدمات الطوارئ',
            'مشروع تعزيز صحة الأم والطفل',
            'مشروع مكافحة التدخين والإدمان',
            'مشروع تطوير الأجهزة الطبية',
            'مشروع الذكاء الاصطناعي في التشخيص',
            'مشروع تحسين جودة الأدوية',
            'مشروع التغذية العلاجية',
            'مشروع تطوير وحدات العناية المركزة',
            'مشروع الصحة الرقمية',
            'مشروع السجلات الطبية الإلكترونية',
            'مشروع تطوير خدمات الإسعاف',
            'مشروع الوقاية من العدوى',
            'مشروع تطوير المختبرات الطبية',
            'مشروع التدريب الطبي المستمر',
            'مشروع تعزيز الصحة المدرسية',
            'مشروع تطوير خدمات كبار السن',
            'مشروع تحسين إدارة المستشفيات',
            'مشروع الطب عن بُعد',
            'مشروع تطوير زراعة الأعضاء',
            'مشروع أبحاث السرطان',
            'مشروع تطوير العلاج الطبيعي',
            'مشروع تعزيز الصحة المجتمعية',
            'مشروع تطوير خدمات غسيل الكلى',
            'مشروع أبحاث الأمراض المعدية',
            'مشروع تطوير وحدات القلب',
            'مشروع تعزيز الصحة البيئية',
            'مشروع تطوير خدمات الطوارئ النفسية',
            'مشروع أبحاث الجينات الطبية',
        ];

        // نخلط العناوين عشوائي
        shuffle($arabicTitles);

        foreach ($arabicTitles as $title) {
            Book::create([
                'title' => $title, // مضمون فريد بدون unique()
                'lang' => 'ar',
                'summary' => 'ملخص شامل للكتاب يغطي أهم المواضيع والمحاور الرئيسية مع شرح مفصل لكل فصل من فصول الكتاب',
                'images' => [
                    asset('files/book1.webp'),
                    asset('files/book2.webp'),
                ],
                'link' => fake()->url(),
                'publishing_house' => fake()->name(),
                'date' => now(),
                'edition_number' => fake()->numberBetween(1, 5),
                'pages' => fake()->numberBetween(100, 1000),
                'goals' => 'أهداف الكتاب تشمل توفير معلومات شاملة ومفيدة للقارئ',
                'category_id' => $categories->random()->id,
                'num_view' => fake()->numberBetween(0, 10000),
            ]);
        }
    }
}
